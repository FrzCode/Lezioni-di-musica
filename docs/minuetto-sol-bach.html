<!DOCTYPE html>
<html lang="it">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Minuetto in Sol Maggiore</title>

  <!-- Font -->
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link rel="stylesheet" type="text/css" href="https://paulrosen.github.io/abcjs/abcjs-audio.css">
  <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@400;700&display=swap" rel="stylesheet" />
  <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">

  <!-- Stili -->
  <link rel="stylesheet" href="../style/style.css" />

  <!-- ABCJS (entrambi gli script come nel contenuto originale, non rimossi) -->
  <script src="https://cdn.jsdelivr.net/npm/abcjs@6.5.1/dist/abcjs-basic-min.js"></script>
  <script src="https://paulrosen.github.io/abcjs/dist/abcjs-basic.js"></script>

  <script type="text/javascript">
    // Ogni brano: titolo, descrizione, codice ABC
    const brani = [
      {
        id: "brano",
        titolo: "Minuetto il Sol Maggiore",
        descrizione: "Ascolta il brano",
        abc: `X:1
T:Minuetto in Sol Maggiore
C:Christian Petzold
%%score (1 2)
%play_highlight_v1_only
%%stretchlast true
%%barnumbers 0
%%setbarnb 1
%%measurefont 10
L:1/4
M:3/4
K:G
V:1 treble stem=auto
%%MIDI program 12
V:2 treble
%%MIDI program 12
%%voicecolor transparent
V:1
d G/A/B/c/ | d G G | e c/d/e/f/ | g G G |
c d/c/ B/A/ | B c/B/A/G/ | F G/A/B/G/ |B A2|
d G/A/B/c/ | d G G | e c/d/e/f/ | g G G | 
c d/c/B/A/ | B c/B/A/G/ | A B/A/G/F/ | G3 :|
|:b g/a/b/g/ | a d/e/f/d/ | g e/f/g/d/ | ^c B/c/ A | 
A/B/ ^c/d/ e/f/ | g f e | f A ^c | d3 |
d G/F/ G | e G/F/ G | d c B | A/G/F/G/ A |
D/E/F/G/A/B/ | c B A | B/d/ G F | G3 :| 
V:2
%%MIDI transpose -24
[gbd']2 a | b3 | c'3 | b3 | 
a3 | g3 | d' b g | d' d'/c'/b/a/ |
b2 a | G' B' G' | c'3 |b c'/b/a/g/ | 
a2 f | g2 b | c' d' d | g2 G :|
|: g3 | f3 | e g e | a2 A | 
a3 | b d' ^c' | d' f a | d' d =c' |
b d' b | c' e' c' | b a g | d'2 z | 
d2 f | e g f | g B d | g d G :|]`
      },
      {
        id: "scala",
        titolo: "Esegui la scala di Sol Maggiore",
        descrizione: "Esegui la scala di Sol Maggiore lentamente, alternando le mani e prestando attenzione alle <b>alterazioni in chiave</b>.",
        abc: `X:1
T:
L:1/4
K:G
V:1 stems=auto
%%MIDI program 12
G A B c d e !mark!f g !mark!f e d c B A G |]`
      },
      {
        id: "arp",
        titolo: "Arpeggio di Sol Maggiore",
        descrizione: "Esegui l'arpeggio lentamente, altenando le mani",
        abc: `X:1
T:
L:1/4
K:G
V:1 stems=auto
%%MIDI program 12
G B d g d B G |]`
      },
      {
        id: "pattern1",
        titolo: "Pattern iniziale",
        descrizione: "Soffermiamoci sull'incipit del brano, facendo attenzione alle note e allo sticking",
        abc: `X:1
T:Pattern 1
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
d G/A/B/c/ | d G G :|
w:R R L R L R L L `
      },
      {
        id: "pattern1_scala",
        titolo: "",
        descrizione: "Ora ripetiamo questo pattern ritmico-melodico con le note della scala di Sol:",
        abc: `X:1
T:
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
G/A/B/c/ | d G || A/B/c/d/|e A||
w:R L R L R L R L R L R L  
B/c/d/e/ | f B || c/d/e/f/|g c||
w:R L R L R L R L R L R L 
d/e/f/g/ | a d || e/f/g/a/|b e||
w:R L R L R L R L R L R L 
f/g/a/b/ | c' f || g/a/b/c'/|d' g||
w:R L R L R L R L R L R L `
      },
      {
        id: "pattern2",
        titolo: "Pattern di battuta 5",
        descrizione: "Passiamo ad un altro pattern che si trova alla battuta n. 5. Ripetilo più volte, con entrambi gli *sticking*.",
        abc: `X:1
T:
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
c d/c/B/A/ :|
w:R L R L R
w:L R L R L`
      },
      {
        id: "pattern2_scala",
        titolo: "",
        descrizione: "Ora applichiamo questo pattern iniziando da ogni nota della scala di Sol:",
        abc: `X:1
T:
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
g a/g/f/e/|f g/f/e/d/|e f/e/d/c/| d e/d/c/B/| 
w:L R L R L R L R L R L R L R L R L R L R
c d/c/B/A/|B c/B/A/G/|A B/A/G/F/| G3||
w:L R L R L R L R L R L R L R L R||`
      },
      {
        id: "pattern3",
        titolo: "Pattern da battuta 17 a 19",
        descrizione: "La seconda parte del brano contiene un altro pattern ritmico-melodico. Eseguilo più volte con attenzione.",
        abc: `X:1
T:
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
b g/a/b/g/ | a d/e/f/d/ | g e/f/g/d/ |
w: R L R R L R L R R L R L R R L`
      },
      {
        id: "pattern3_scala",
        titolo: "",
        descrizione: "Applichiamo questo pattern iniziando da ogni nota della scala di Sol in senso discendente:",
        abc: `X:1
T:
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
g/a/b/g/ a| f/g/a/f/ g| e/f/g/e/ f| d/e/f/d/ e|
w:L R R L R L R R L R L R R L R L R R L R  
c/d/e/c/ d| B/c/d/B/ c| A/B/c/A/ B| G/A/B/G/ A| F/G/A/F/ G |]
w:L R R L R L R R L R L R R L R L R R L R L R R L R`
      },
      {
        id: "pattern3_scala2",
        titolo: "",
        descrizione: "Possiamo usare lo stesso pattern con la scala di Sol in senso ascendente. Fai attenzione allo sticking.",
        abc: `X:1
T:
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
V:1
G/A/B/G/ A|A/B/c/A/ B| B/c/d/B/ c| c/d/e/c/ d|
w:R L R L R R L R L R R L R L R R L R L R  
d/e/f/d/ e|e/f/g/e/ f| f/g/a/f/ g |]
w:R L R L R R L R L R R L R L R R L R L R`
      },
      {
        id: "pattern4",
        titolo: "Pattern battute 25 e 26",
        descrizione: "",
        abc: `X:1
T:
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
d G/F/ G | e G/F/ G |
w: R L R L R L R L `
      },
      {
        id: "pattern4_scala",
        titolo: "",
        descrizione: "Applichiamo questo pattern alla scala di Sol:",
        abc: `X:1
T:
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
G G/F/ G | A G/F/ G | B G/F/ G | c G/F/ G | 
w: R L R L R L R L R L R L R L R L
d G/F/ G | e G/F/ G | f G/F/ G | g G/F/ G |] 
w: R L R L R L R L R L R L R L R L `
      },
      {
        id: "pattern5",
        titolo: "Pattern di battuta 28",
        descrizione: "L'ultimo pattern che approfondiamo lo troviamo a battuta 28:",
        abc: `X:1
T:
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
V1:
A/G/F/G/ A |
w: R L R L R
w: L R L R L`
      },
      {
        id: "pattern5_scala",
        titolo: "",
        descrizione: "Applichiamo questo pattern alla scala di Sol sia in senso ascendente che discendente:",
        abc: `X:1
T:
L:1/4
M:3/4
K:G
V:1 stems=auto
%%MIDI program 12
V1:
G/F/E/F/ G|A/G/F/G/ A | B/A/G/A/ B| c/B/A/B/ c| 
w:R L R L R R L R L R R L R L R R L R L R 
d/c/B/c/ d| e/d/c/d/ e| f/e/d/e/ f| g/f/e/f/ g||
w:R L R L R R L R L R R L R L R R L R L R 
g/f/e/f/ g|f/e/d/e/ f|e/d/c/d/ e|d/c/B/c/ d|
w:R L R L R R L R L R R L R L R R L R L R 
c/B/A/B/ c| B/A/G/A/ B|A/G/F/G/ A | G/F/E/F/ G|]
w:R L R L R R L R L R R L R L R R L R L R`      
      },
    ];

    // Opzioni di rendering
    const abcOptions = { add_classes: true, responsive: "resize" };

    // CursorControl personalizzato per l'highlight e il cursore rosso
    function CursorControl(divId) {
      var self = this;
      self.onReady = function () { };
      self.onStart = function () {
        var svg = document.querySelector("#" + divId + " svg");
        var cursor = document.createElementNS("http://www.w3.org/2000/svg", "line");
        cursor.setAttribute("class", "abcjs-cursor");
        cursor.setAttributeNS(null, 'x1', 0);
        cursor.setAttributeNS(null, 'y1', 0);
        cursor.setAttributeNS(null, 'x2', 0);
        cursor.setAttributeNS(null, 'y2', 0);
        svg.appendChild(cursor);
      };
      self.beatSubdivisions = 2;
      self.onBeat = function (beatNumber, totalBeats, totalTime) { };
      self.onEvent = function (ev) {
        if (ev.measureStart && ev.left === null) return;
        var lastSelection = document.querySelectorAll("#" + divId + " svg .highlight");
        for (var k = 0; k < lastSelection.length; k++)
          lastSelection[k].classList.remove("highlight");
        if (ev.voice === 0) {
          for (var i = 0; i < ev.elements.length; i++) {
            var note = ev.elements[i];
            for (var j = 0; j < note.length; j++) {
              note[j].classList.add("highlight");
            }
          }
        }
        var cursor = document.querySelector("#" + divId + " svg .abcjs-cursor");
        if (cursor) {
          cursor.setAttribute("x1", ev.left - 2);
          cursor.setAttribute("x2", ev.left - 2);
          cursor.setAttribute("y1", ev.top);
          cursor.setAttribute("y2", ev.top + ev.height);
        }
      };
      self.onFinished = function () {
        var els = document.querySelectorAll("#" + divId + " svg .highlight");
        for (var i = 0; i < els.length; i++) {
          els[i].classList.remove("highlight");
        }
        var cursor = document.querySelector("#" + divId + " svg .abcjs-cursor");
        if (cursor) {
          cursor.setAttribute("x1", 0);
          cursor.setAttribute("x2", 0);
          cursor.setAttribute("y1", 0);
          cursor.setAttribute("y2", 0);
        }
      };
    }

    // Per ogni brano: rendering, synth, controlli
    function renderAll() {
      brani.forEach(brano => {
        // Popola titolo e descrizione
        const titleEl = document.querySelector("#" + brano.id + " .abc-title");
        if (titleEl) { titleEl.innerHTML = brano.titolo; }
        const descEl = document.querySelector("#" + brano.id + " .abc-desc");
        if (descEl) { descEl.innerHTML = brano.descrizione || ''; }

        if (ABCJS.synth.supportsAudio()) {
          let cursorControl = new CursorControl(brano.id + "-paper");
          let synthControl = new ABCJS.synth.SynthController();
          let synthOptions = {
            displayLoop: true,
            displayRestart: true,
            displayPlay: true,
            displayProgress: true,
            displayWarp: true
          };

          if (brano.id !== "brano") {
            // Forza il tempo a 72 BPM per tutti i pattern
            synthOptions.qpm = 72;
            synthOptions.tempo = 72;
          }

          synthControl.load("#" + brano.id + "-audio", cursorControl, synthOptions);
          let visualOptions = { add_classes: true, responsive: "resize" };
          let visualObj = ABCJS.renderAbc(brano.id + "-paper", brano.abc, visualOptions)[0];

          // Forza il tempo a 72 BPM per tutti i pattern (tranne il brano principale)
          if (brano.id !== "brano") {
            if (visualObj.tempo) visualObj.tempo = 72;
            if (visualObj.qpm) visualObj.qpm = 72;
            if (visualObj.midi) visualObj.midi.tempo = 72;
          }

          let midiBuffer = new ABCJS.synth.CreateSynth();
          midiBuffer.init({ visualObj: visualObj }).then(function () {
            if (brano.id === "brano") {
              synthControl.setTune(visualObj, false, { highlight: { vocal: [0] } });
            } else {
              synthControl.setTune(visualObj, false, { tempo: 72, qpm: 72 });
            }
          }).catch(function (error) {
            console.error("Error creating synth for " + brano.id, error);
          });

          // Nascondi elementi di tempo nei pattern
          if (brano.id !== "brano") {
            setTimeout(() => {
              const paper = document.querySelector("#" + brano.id + "-paper");
              if (paper) {
                const tempoElements = paper.querySelectorAll(".abcjs-tempo, .abcjs-tempo-text, .abcjs-tempo-indicator");
                tempoElements.forEach(el => { el.style.display = "none"; });
              }
            }, 100);
          }
        } else {
          document.getElementById(brano.id + "-audio").innerHTML =
            "<div class='audio-error'>Audio is not supported in this browser.</div>";
        }
      });
    }

    document.addEventListener("DOMContentLoaded", () => {
      // carica header
      fetch("header.html")
        .then(response => response.text())
        .then(data => {
          document.getElementById("header-container").innerHTML = data;
        });

      // copia eventuale indice nella sidebar sinistra (se presente)
      const source = document.getElementById("original-index");
      const sidebar = document.querySelector(".left-sidebar");
      if (source && sidebar) {
        sidebar.innerHTML = source.innerHTML;
      }

      // render ABCJS
      renderAll();
    });
  </script>
</head>

<body>
  <!-- Header come nella pagina "scale" -->
  <div id="header-container"></div>

  <main>
    <div class="content-wrapper">
      <!-- Sidebar sinistra caricata da file esterno -->
      <div id="aside-container"></div>

      <script>
        fetch("../scripts/aside-moduli.html")
          .then(r => r.text())
          .then(html => { document.getElementById("aside-container").innerHTML = html; })
          .catch(err => console.error("Errore nel caricamento aside:", err));
      </script>


      <!-- Contenuti principali -->
      <article>
        <h1>Minuetto in Sol Maggiore</h1>

        <h2>Introduzione</h2>
        <p>Questo brano è un pilastro per chiunque si avvicini alla musica classica. Sebbene sia conosciuto come un'opera di Bach, l'autore più probabile è in realtà <strong>Christian Petzold</strong>, un altro compositore barocco. L'opera proviene dal famoso <em>Quaderno di Anna Magdalena Bach</em>, raffinata musicista e seconda moglie di Johann Sebastian Bach.
    </p>
   
    <h3>Carattere e Forma della Melodia</h3>
    <p>
        Il Minuetto è una danza di corte del periodo barocco, il che significa che il tuo obiettivo principale è trasmettere **grazia, nobiltà e stabilità ritmica**.
    </p>
    
    <h4>Tempo e Tonalità</h4>
    <p>
        Il brano è in <strong>Sol Maggiore</strong> e segue un rigoroso schema in <strong>3/4</strong>. Questo metro ternario richiede che tu senta un **leggero accento sul primo battito** di ogni misura, mantenendo il tempo moderato e costante, proprio come farebbe un ballerino.
    </p>

    <h4>La Forma Binaria (A-B)</h4>
    <p>
        La melodia è costruita in due sezioni principali, entrambe ripetute (A-A-B-B).
    </p>
    <ul>
        <li>La <strong>Sezione A</strong> parte da Sol Maggiore e, attraverso una melodia molto orecchiabile e basata su intervalli semplici (spesso terze e note ribattute), si sposta verso la dominante, **Re Maggiore**. Questo crea la prima tensione.</li>
        <li>La <strong>Sezione B</strong> esplora brevemente la nuova armonia prima di reindirizzare la melodia verso il ritorno a **Sol Maggiore**, concludendo il pezzo con un senso di completezza.</li>
    </ul>
    </div>

        <div id="brano" class="abc-section">
    <div class="abc-title"></div>
    <div class="abc-desc"></div>
    <div id="brano-paper"></div>
    <div id="brano-audio"></div>
  </div>  
  <p>Per affrontare al meglio lo studio di questo brano sulla marimba, dobbiamo capire in che tonalità è impostato il brano. Eseguiamo la scala e l'arpeggio:</p>
  

  <div id="scala" class="abc-section">
    <div class="abc-title"></div>
    <div class="abc-desc"></div>
    <div id="scala-paper"></div>
    <div id="scala-audio"></div>
  </div>
  <div id="arp" class="abc-section">
    <div class="abc-title"></div>
    <div class="abc-desc"></div>
    <div id="arp-paper"></div>
    <div id="arp-audio"></div>
  </div>

        <p> <class="intro-paragraph">Adesso ci eserciteremo su alcuni <b>"patterns"</b> ritmico-melodici che troviamo in questo brano.</p>

<h2>Cos'è un pattern?</h2>
<p>Un <b>pattern</b> è una <i>piccola cellula musicale</i>, una breve sequenza di note con un ritmo specifico, che possiamo trovare più volte.</p>

<p><b>“Pattern”</b> infatti significa <b>modello</b> o <b>schema</b>.</p>

<p>In parole semplici:</p>
<p>È un <b>mini-motivetto</b> che usiamo più volte, per allenarci nella coordinazione, nella memoria e nella musicalità.</p>

<h2>Perché studiare i pattern?</h2>

<p><b>Sticking efficiente</b>: imparare dove usare la mano destra o sinistra in sequenza, prima ancora di pensare all’intero fraseggio.</p>

<p><b>Memoria motoria</b>: ripetere uno stesso pattern aiuta ad automatizzare i movimenti delle mani.</p>
   
<p><b>Analisi musicale</b>: riconoscere i pattern nel brano aiuta a capire la struttura e a suonare in modo più consapevole.</p>

<p>Ogni frammento su cui ci soffermeremo lo ripeteremo:</p>

<p>- prima lentamente, facendo attenzione a leggere correttamente il ritmo, le note e lo sticking;</p>
   
<p>- quando lo memorizziamo correttamente lo possiamo eseguire più volte sempre più velocemente;</p>

<p>- infine lo trasporteremo su tutte le note della scala, per rendere più solido il controllo tecnico.</p>

        <div id="pattern1" class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern1-paper"></div>
          <div id="pattern1-audio"></div>
        </div>

        <div id="pattern1_scala" class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern1_scala-paper"></div>
          <div id="pattern1_scala-audio"></div>
        </div>

        <div id="pattern2" class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern2-paper"></div>
          <div id="pattern2-audio"></div>
        </div>

        <div id="pattern2_scala" class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern2_scala-paper"></div>
          <div id="pattern2_scala-audio"></div>
        </div>

        <div id="pattern3" class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern3-paper"></div>
          <div id="pattern3-audio"></div>
        </div>

        <div id="pattern3_scala class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern3_scala-paper"></div>
          <div id="pattern3_scala-audio"></div>
        </div>

        <div id="pattern3_scala2" class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern3_scala2-paper"></div>
          <div id="pattern3_scala2-audio"></div>
        </div>

        <div id="pattern4" class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern4-paper"></div>
          <div id="pattern4-audio"></div>
        </div>

        <div id="pattern4_scala" class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern4_scala-paper"></div>
          <div id="pattern4_scala-audio"></div>
        </div>

        <div id="pattern5" class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern5-paper"></div>
          <div id="Pattern5-audio"></div>
        </div>

        <div id="pattern5_scala" class="abc-section">
          <div class="abc-title"></div>
          <div class="abc-desc"></div>
          <div id="pattern5_scala-paper"></div>
          <div id="pattern5_scala-audio"></div>
        </div>

        <div class="external-link-container">
          <p>Vai qui per concludere la lezione:</p>
          <a href="https://michaeleskin.com/abctools/abctools.html?lzw=BoLgjAUAKiCaCGA7A1gU1QAgCIHscBMAbVCAYRCgCd58A6CAUgYGcBjHS1ACgzAwCYMAZgCUjAA6F4ATwD6ACwCWAc3mEV8gC6yAbmFk5EhaRAAy4APQAWCAFkQ-axACKIAEQBBQsWWUcb3msAXjB+ADYIAGkQUkYWTU5NVjV4Zk0MBIBXEgA1cAxWYgAzIPFUSlY42wBJLGqMcT9feABbXn4ADira+oSkZnEcZkwAWiEbPMEcVk14HVQgwTTUFuYg+EzNHG66hqbqNoAGOJ0cRVZUdkIODOpEAfhORE0IPKEMadn5oPfl1fXNtsmDVdo0cM0jiczhcrjc+vdxI9UM9XuAIBgAF6CAA+mJxeIwuKxhIgAEIWkVSQULKxrLSrNSrPTaYTGcyLNSuKSLBZSSzcbSRCz2UyOQK6RKMFyebzWCTqUKJQyRfypdzZTSLCJqSLWbTdfqxZiLABvGkAXxZZtY5upxpJpMpGFJAD4+Urda73aKffS9Zq1TK+ayvfTFb7rM63Sqlf6rRadWL0aGPbGUxGfXGObTpRr-dqMaaEyzC6zC9bbfGbXbS9j0cSicbyU7c+78wbU5nxSzc7L5YL7Riy-bW6rBR2I-7Jzn1W26wqJ+zWaPNdrDV3E5nDWWi9Wq5WObX6-ih4XyeIqSv27Ht+LpxYr-OB6Wh0T
        </div> <!-- chiude external-link-container -->
      </article>

      <!-- Sidebar destra con articoli correlati (puoi personalizzare) -->
      <aside>
        <h3>Articoli Correlati</h3>
        <ul>
          <li><a href="#">Altro rudiment di base</a></li>
          <li><a href="#">Esercizi di sticking</a></li>
          <li><a href="#">Pattern avanzati</a></li>
          <li><a href="#">Lettura ritmica applicata</a></li>
        </ul>
      </aside>
    </div>
  </main>

  <footer>
    <p>&copy; 2025 Il Mio Blog. Tutti i diritti riservati.</p>
  </footer>
</body>
</html>
